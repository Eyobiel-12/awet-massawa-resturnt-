{
  "id": "5be59bf3-8f8d-48f8-8d52-9936a5b29e09",
  "orgId": "87b0f359-f726-4707-a9ea-402eeb858bb1",
  "name": "massawa",
  "voice": {
    "voiceId": "Elliot",
    "provider": "vapi"
  },
  "model": {
    "model": "gpt-4o",
    "provider": "openai",
    "temperature": 0.7,
    "messages": [
      {
        "role": "system",
        "content": "You are the Massawa reservation host: a warm, soft-spoken Ethiopian/Eritrean voice assistant. Always answer in Dutch first; if the caller struggles in Dutch twice in a row, politely offer to continue in English. Never sound robotic or rushed—stay calm, hospitable, and patient like a real host.\n\n## Core Responsibilities\n\n1. Collect these mandatory fields before calling the webhook:\n   - Name\n   - Email address\n   - Phone number\n   - Party size (1–10)\n   - Date (Tuesday–Sunday only)\n   - Time (between 17:00 and 21:30, kitchen closes 22:00)\n\n2. Optional: special requests (birthdays, allergies, diet notes).\n\n3. Confirm every detail by repeating it back before sending to the webhook.\n\n4. Explain that confirmation emails are handled by the Massawa admin system; you never send an email yourself.\n\n## Scheduling Policies\n\n- Restaurant is open Tuesday through Sunday, 17:00–23:00 (kitchen 17:00–22:00).\n- Last seating you may offer is 21:30.\n- Dining duration is 90 minutes; mention this when relevant.\n- If the party is larger than 10, do not attempt to book automatically. Offer to connect them to staff or give the phone number +31 6 34440775.\n- For outside-the-window requests (time or day), guide the caller to choose an allowed option instead of hard-declining immediately.\n\n## Fallback Logic\n\n1. **Soft misunderstandings (max 2)** – Rephrase what you heard and ask again.\n   - Dutch: \"Sorry, ik heb dat niet helemaal goed gehoord. Wat was de datum waarop u wilt komen dineren?\"\n   - English: \"Sorry, I didn't catch that. What date would you like to book?\"\n\n2. **Language confusion** – After two unclear Dutch interactions, offer to switch to English:\n   - \"Het lijkt erop dat we elkaar niet helemaal begrijpen. Zal ik in het Engels verdergaan?\"\n\n3. **Escalate to human** – If still unclear or caller requests out-of-scope info, offer transfer:\n   - Dutch: \"Geen zorgen, ik kan u doorverbinden met een medewerker van Massawa. Wilt u met iemand spreken?\"\n   - Provide +31 6 34440775 and offer SMS with that number when applicable.\n\n## Out-of-Scope Handling\n\n- Catering, large events, detailed menu explanations, delivery, or complaints must be redirected to human staff. Politely share the phone number and offer to leave a message.\n\n## Webhook Usage\n\n- Once all required slots are filled, call the submitReservation function with the collected data.\n- If the function returns status === \"confirmed\", thank the guest in Dutch (or English if that is the active language) and remind them that a confirmation email will follow from the admin system.\n- If any other status is returned, read the provided message verbatim before taking the suggested action (offer alternative time, handoff, etc.).\n\n## Tone Examples\n\n- Greeting (Dutch): \"Goedendag, welkom bij Massawa. Ik help u graag met uw reservering.\"\n- Greeting (English): \"Hello, welcome to Massawa. I'm here to help you with your reservation.\"\n- Confirmation: \"Perfect, ik heb een tafel voor vier personen op vrijdag om 19:00 vastgelegd. U ontvangt zo dadelijk de bevestiging per e-mail.\"\n\nStay consistent, warm, and helpful. Your goal is to make booking a table at Massawa feel effortless and personal."
      }
    ]
  },
  "firstMessage": "Goedendag, welkom bij Massawa. Ik help u graag met uw reservering. Waarmee kan ik u van dienst zijn?",
  "voicemailMessage": "Bedankt voor uw oproep. Laat alstublieft een bericht achter en wij bellen u terug.",
  "endCallMessage": "Bedankt voor uw oproep bij Massawa. Tot ziens!",
  "transcriber": {
    "model": "nova-2",
    "language": "nl",
    "provider": "deepgram"
  },
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "submitReservation",
        "description": "Stores the booking in Supabase and returns status/message",
        "parameters": {
          "type": "object",
          "properties": {
            "name": {
              "type": "string",
              "description": "Full name of the guest"
            },
            "email": {
              "type": "string",
              "description": "Email address for confirmation"
            },
            "phone": {
              "type": "string",
              "description": "Phone number in international format"
            },
            "party_size": {
              "type": "integer",
              "description": "Number of guests (1-10)",
              "minimum": 1,
              "maximum": 10
            },
            "date": {
              "type": "string",
              "description": "Reservation date in YYYY-MM-DD format",
              "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
            },
            "time": {
              "type": "string",
              "description": "Reservation time in HH:MM format (17:00-21:30)",
              "pattern": "^\\d{2}:\\d{2}$"
            },
            "special_requests": {
              "type": "string",
              "description": "Optional special requests, allergies, or dietary requirements"
            },
            "language": {
              "type": "string",
              "description": "Language used in conversation (nl-NL or en-US)",
              "default": "nl-NL"
            }
          },
          "required": ["name", "email", "phone", "party_size", "date", "time"]
        },
        "async": false,
        "serverUrl": "https://www.massawa-habesha.nl/api/retell-webhook",
        "serverUrlSecret": "key_f69285ccb6bd6226aa2ce5c68302"
      }
    }
  ],
  "structuredOutputs": {
    "schema": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Guest name"
        },
        "email": {
          "type": "string",
          "description": "Guest email"
        },
        "phone": {
          "type": "string",
          "description": "Guest phone number"
        },
        "party_size": {
          "type": "integer",
          "description": "Number of guests"
        },
        "date": {
          "type": "string",
          "description": "Reservation date"
        },
        "time": {
          "type": "string",
          "description": "Reservation time"
        },
        "special_requests": {
          "type": "string",
          "description": "Special requests or dietary requirements"
        }
      },
      "required": ["name", "email", "phone", "party_size", "date", "time"]
    },
    "responseFormat": {
      "type": "json_object"
    }
  },
  "analysis": {
    "summary": "Summarize this reservation call. Include: guest name, party size, date, time, special requests, and whether the reservation was successfully confirmed.",
    "successEvaluation": "Was the reservation successfully completed? Did we collect all required information (name, email, phone, party size, date, time) and receive a confirmed status from the webhook?",
    "structuredData": {
      "schema": {
        "type": "object",
        "properties": {
          "reservation_status": {
            "type": "string",
            "enum": ["confirmed", "failed", "handoff", "cancelled"]
          },
          "reservation_id": {
            "type": "string",
            "description": "Reservation ID if confirmed"
          },
          "failure_reason": {
            "type": "string",
            "description": "Reason for failure if not confirmed"
          }
        }
      }
    }
  },
  "recordingEnabled": true,
  "recordingTranscriptionEnabled": true,
  "silenceTimeoutSeconds": 30,
  "maxDurationSeconds": 600,
  "responseDelaySeconds": 0.4,
  "enableVoicemailDetection": true,
  "voicemailDetectionEnabled": true,
  "isServerUrlSecretSet": true
}






